<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cofre 2 ‚Äî Como eu te vejo</title>
    <style>
        :root {
            --bg: #0b0f14;
            --card: #121824;
            --text: #e7ecf4;
            --muted: #aab3c2;
            --line: rgba(255, 255, 255, .10);
            --accent: #7aa2ff;
            --shadow: 0 20px 60px rgba(0, 0, 0, .55);
            --radius: 18px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            margin: 0;
            min-height: 100vh;
            display: grid;
            place-items: center;
            background:
                radial-gradient(900px 500px at 15% 15%, rgba(122, 162, 255, .12), transparent 55%),
                radial-gradient(700px 450px at 85% 25%, rgba(255, 122, 182, .08), transparent 55%),
                radial-gradient(900px 500px at 50% 85%, rgba(114, 255, 189, .06), transparent 60%),
                var(--bg);
            color: var(--text);
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", Helvetica, "Apple Color Emoji", "Segoe UI Emoji";
            padding: 24px;
        }

        .wrap {
            width: min(760px, 100%);
        }

        .container {
            background: linear-gradient(180deg, rgba(18, 24, 36, .92), rgba(18, 24, 36, .82));
            border: 1px solid var(--line);
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            padding: 32px 28px;
            backdrop-filter: blur(8px);
        }

        .top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--line);
        }

        h1 {
            margin: 0;
            font-size: 18px;
            letter-spacing: .2px;
            font-weight: 650;
            color: var(--text);
        }

        .intro-text {
            text-align: left;
            margin-bottom: 28px;
            line-height: 1.7;
        }

        .intro-text p {
            margin: 14px 0;
            color: var(--muted);
            font-size: 14.5px;
        }

        .intro-text p:last-child {
            margin-bottom: 0;
        }

        .lock-section {
            margin-bottom: 24px;
            padding: 20px;
            background: rgba(255, 255, 255, .03);
            border: 1px solid var(--line);
            border-radius: 14px;
            transition: all 0.3s ease;
        }

        .lock-section.unlocked {
            background: rgba(122, 162, 255, .08);
            border-color: rgba(122, 162, 255, .25);
        }

        .lock-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lock-title::before {
            content: 'üîí';
            font-size: 18px;
        }

        .lock-section.unlocked .lock-title::before {
            content: '‚ú®';
        }

        .lock-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .password-input {
            flex: 1 1 280px;
            background: rgba(255, 255, 255, .04);
            border: 1px solid var(--line);
            color: var(--text);
            border-radius: 12px;
            padding: 12px 14px;
            outline: none;
            font-size: 16px;
            transition: all 0.2s ease;
        }

        .password-input:focus {
            border-color: rgba(122, 162, 255, .55);
            box-shadow: 0 0 0 4px rgba(122, 162, 255, .12);
        }

        .password-input:disabled {
            background: rgba(255, 255, 255, .02);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn {
            flex: 0 0 auto;
            background: rgba(122, 162, 255, .14);
            border: 1px solid rgba(122, 162, 255, .35);
            color: var(--text);
            border-radius: 12px;
            padding: 12px 16px;
            cursor: pointer;
            font-size: 14px;
            transition: .15s ease;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-1px);
            background: rgba(122, 162, 255, .18);
        }

        .btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn:disabled {
            background: rgba(255, 255, 255, .05);
            border-color: var(--line);
            cursor: not-allowed;
            opacity: 0.5;
        }

        .error-message {
            display: block;
            margin-top: 10px;
            padding: 10px 12px;
            border-radius: 12px;
            border: 1px solid rgba(255, 90, 90, .35);
            background: rgba(255, 90, 90, .10);
            color: rgba(255, 215, 215, .95);
            font-size: 13px;
            min-height: 20px;
        }

        .error-message:empty {
            display: none;
        }

        .lock-content {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--line);
            animation: fadeIn 0.5s;
        }

        .lock-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-text {
            color: rgba(231, 236, 244, .92);
            font-size: 15px;
            line-height: 1.75;
            margin-bottom: 16px;
        }

        .content-text p {
            margin-bottom: 14px;
        }

        .content-text p:last-child {
            margin-bottom: 0;
        }

        .textarea-group {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid var(--line);
        }

        .textarea-label {
            display: block;
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--text);
            line-height: 1.6;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 1px solid var(--line);
            border-radius: 12px;
            font-size: 14px;
            font-family: inherit;
            color: var(--text);
            background: rgba(255, 255, 255, .04);
            resize: vertical;
            outline: none;
            transition: all 0.2s ease;
            line-height: 1.6;
        }

        textarea:focus {
            border-color: rgba(122, 162, 255, .55);
            box-shadow: 0 0 0 4px rgba(122, 162, 255, .12);
        }

        textarea:disabled {
            background: rgba(255, 255, 255, .02);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .save-btn {
            margin-top: 14px;
            background: rgba(114, 255, 189, .14);
            border: 1px solid rgba(114, 255, 189, .35);
        }

        .save-btn:hover:not(:disabled) {
            background: rgba(114, 255, 189, .18);
        }

        .thank-you-message {
            display: none;
            margin-top: 20px;
            padding: 16px;
            background: rgba(114, 255, 189, .08);
            border: 1px solid rgba(114, 255, 189, .25);
            border-radius: 12px;
            color: rgba(200, 255, 230, .95);
            font-size: 14px;
            line-height: 1.7;
        }

        .thank-you-message.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .curiosity-reveal {
            display: none;
            margin-top: 20px;
            padding: 18px;
            background: rgba(122, 162, 255, .08);
            border-left: 3px solid rgba(122, 162, 255, .5);
            border-radius: 8px;
            font-size: 14.5px;
            line-height: 1.75;
            color: rgba(231, 236, 244, .92);
        }

        .curiosity-reveal.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .curiosity-reveal p {
            margin-bottom: 12px;
        }

        .curiosity-reveal p:last-child {
            margin-bottom: 0;
        }

        .text-flow {
            color: rgba(231, 236, 244, .92);
            font-size: 15px;
            line-height: 1.75;
        }

        .text-flow p {
            margin-bottom: 14px;
        }

        .text-flow p:last-child {
            margin-bottom: 0;
        }

        .text-part {
            display: none;
        }

        .text-part.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .inline-lock {
            margin: 24px 0;
            padding: 18px;
            background: rgba(255, 255, 255, .04);
            border: 1px solid var(--line);
            border-radius: 12px;
        }

        .inline-lock.unlocked {
            background: rgba(122, 162, 255, .08);
            border-color: rgba(122, 162, 255, .25);
        }

        .inline-lock-label {
            font-size: 14px;
            color: var(--muted);
            margin-bottom: 12px;
            font-style: italic;
        }

        .inline-input-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .inline-input {
            flex: 1 1 200px;
            background: rgba(255, 255, 255, .06);
            border: 1px solid var(--line);
            color: var(--text);
            border-radius: 10px;
            padding: 10px 12px;
            outline: none;
            font-size: 16px;
            transition: all 0.2s ease;
        }

        .inline-input:focus {
            border-color: rgba(122, 162, 255, .55);
            box-shadow: 0 0 0 3px rgba(122, 162, 255, .12);
        }

        .inline-input:disabled {
            background: rgba(255, 255, 255, .02);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .inline-btn {
            flex: 0 0 auto;
            background: rgba(122, 162, 255, .14);
            border: 1px solid rgba(122, 162, 255, .35);
            color: var(--text);
            border-radius: 10px;
            padding: 10px 16px;
            cursor: pointer;
            font-size: 14px;
            transition: .15s ease;
        }

        .inline-btn:hover:not(:disabled) {
            transform: translateY(-1px);
            background: rgba(122, 162, 255, .18);
        }

        .inline-btn:disabled {
            background: rgba(255, 255, 255, .05);
            border-color: var(--line);
            cursor: not-allowed;
            opacity: 0.5;
        }

        .inline-error {
            display: block;
            margin-top: 10px;
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 90, 90, .35);
            background: rgba(255, 90, 90, .10);
            color: rgba(255, 215, 215, .95);
            font-size: 12.5px;
            min-height: 20px;
        }

        .inline-error:empty {
            display: none;
        }

        .hint-button {
            margin-top: 12px;
            background: rgba(114, 255, 189, .14);
            border: 1px solid rgba(114, 255, 189, .35);
            color: var(--text);
            border-radius: 10px;
            padding: 8px 14px;
            cursor: pointer;
            font-size: 13px;
            transition: .15s ease;
            display: inline-block;
        }

        .hint-button:hover {
            background: rgba(114, 255, 189, .18);
            transform: translateY(-1px);
        }

        .hint-display {
            display: none;
            margin-top: 12px;
            padding: 14px;
            background: rgba(122, 162, 255, .08);
            border-left: 3px solid rgba(122, 162, 255, .5);
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
            color: rgba(231, 236, 244, .92);
        }

        .hint-display.active {
            display: block;
            animation: fadeIn 0.4s;
        }

        .hint-display p {
            margin-bottom: 8px;
        }

        .hint-display p:last-child {
            margin-bottom: 0;
        }

        .hint-display strong {
            color: var(--text);
        }

        /* Responsividade para mobile */
        @media (max-width: 640px) {
            body {
                padding: 16px;
            }

            .container {
                padding: 24px 20px;
                border-radius: 16px;
            }

            .intro-text p {
                font-size: 14px;
                margin: 12px 0;
            }

            .lock-section {
                padding: 16px;
                margin-bottom: 20px;
            }

            .lock-title {
                font-size: 15px;
                margin-bottom: 14px;
            }

            .lock-input-group {
                flex-direction: column;
                gap: 10px;
            }

            .password-input {
                flex: 1 1 auto;
                width: 100%;
                min-width: 0;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .content-text {
                font-size: 14.5px;
                line-height: 1.7;
            }

            .content-text p {
                margin-bottom: 12px;
            }

            h1 {
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 12px;
            }

            .container {
                padding: 20px 16px;
            }

            .intro-text p {
                font-size: 13.5px;
            }

            .lock-section {
                padding: 14px;
            }

            .content-text {
                font-size: 14px;
            }

            .text-flow {
                font-size: 14px;
            }

            .inline-lock {
                padding: 14px;
            }

            .inline-input-group {
                flex-direction: column;
            }

            .inline-input {
                width: 100%;
            }

            .inline-btn {
                width: 100%;
            }
        }

        .spotify-section {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid var(--line);
        }

        .spotify-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid var(--line);
            background: rgba(255, 255, 255, .03);
            color: var(--text);
            text-decoration: none;
            font-size: 14px;
            transition: .15s ease;
            margin-bottom: 10px;
        }

        .spotify-link:hover {
            transform: translateY(-1px);
            border-color: rgba(255, 255, 255, .18);
        }

        .spotify-hint {
            font-size: 12px;
            color: rgba(231, 236, 244, .55);
            margin-top: 8px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="wrap">
        <div class="container">
            <div class="top">
                <h1>Cofre 2 ‚Äî Como eu te vejo</h1>
            </div>

            <div class="text-flow">
                <!-- Parte 1: Texto inicial (sempre vis√≠vel) -->
                <div class="text-part active" id="part1">
                    <p>Oii, eu de novo. Dia 2 ‚Äî e eu nem acredito que, em 5 dias (os mais longos deste ano), vamos finalmente nos encontrar.</p>
                    <p>Ontem foi a primeira "chave". Meio que uma declara√ß√£o de como as coisas est√£o do lado de c√°. Eu tenho vontade constante de saber mais sobre voc√™: do que gosta ou n√£o, se estamos na mesma intensidade‚Ä¶ Isso tudo √© muito importante pra gente, n√©? Percebi isso em voc√™ tamb√©m. Entender em que frequ√™ncia cada um est√° sintonizado s√≥ refor√ßa que nos importamos com o sentimento um do outro e que garantir que o outro esteja bem √© prioridade.</p>
                    <p>Por mais que eu queira saber muito mais sobre voc√™ ‚Äî e sei que voc√™ tamb√©m sobre mim ‚Äî, esse n√£o √© o momento agora (√≥bvio que a gente vai guardar o melhor pro final). Quando finalmente nos encontrarmos pessoalmente, olho no olho.</p>
                    <p>Hoje quero fazer um resumo: olhar para o pouco passado que temos (mas bem aproveitado, na medida do poss√≠vel, haha), para o presente ‚Äî onde estamos hoje ‚Äî e fazer uma leve proje√ß√£o, nesse caso minha, de como quero que as coisas continuem.</p>
                </div>

                <!-- Input 1: Data da primeira mensagem -->
                <div class="inline-lock" id="inlineLock1">
                    <div class="inline-lock-label">Digite a data da nossa primeira mensagem trocada (dia e m√™s):</div>
                    <div class="inline-input-group">
                        <input 
                            type="text" 
                            id="password1" 
                            class="inline-input" 
                            placeholder="Ex: 4 julho"
                            aria-label="Data da primeira mensagem"
                        >
                        <button class="inline-btn" onclick="checkInlinePassword(1)" aria-label="Continuar">Continuar</button>
                    </div>
                    <div class="inline-error" id="error1"></div>
                </div>

                <!-- Parte 2: Ap√≥s data -->
                <div class="text-part" id="part2">
                    <p>Nossa primeira mensagem foi trocada no dia 1¬∫ de dezembro e, desde aquele dia exato, um sorriso j√° surgia no meu rosto de forma totalmente involunt√°ria‚Ä¶ afinal, de alguma maneira miraculosa, fui parar no seu <em>close friends</em>. Ihuuuuu. E eu bobo nem nada, na sua primeira apari√ß√£o eu j√° comentei, e da√≠ partimos para a troca de mensagens, reels, prega√ß√µes e a famosa liga√ß√£o da triagem da loucura kkkk (ser√° que ele √© doido ou n√£o? Vamos confirmar).</p>
                    <p>Resumindo bastante, porque isso aqui n√£o √© um livro da J. K. Rowling‚Ä¶ c√° estamos n√≥s. Eu sa√≠ do status de poss√≠vel louco ‚Äî e irm√£o da Andressa, filho do Gilvan e da Jeane ‚Äî para:</p>
                </div>

                <!-- Input 2: Palavra carinhosa que ele chama ela -->
                <div class="inline-lock" id="inlineLock2">
                    <div class="inline-lock-label">A palavra carinhosa que voc√™ me chama na maioria das vezes:</div>
                    <div class="inline-input-group">
                        <input 
                            type="text" 
                            id="password2" 
                            class="inline-input" 
                            placeholder="A palavra que eu uso..."
                            aria-label="Palavra carinhosa"
                        >
                        <button class="inline-btn" onclick="checkInlinePassword(2)" aria-label="Continuar">Continuar</button>
                    </div>
                    <div class="inline-error" id="error2"></div>
                </div>

                <!-- Parte 3: Ap√≥s meu bem -->
                <div class="text-part" id="part3">
                    <p>...meu bem... que evolu√ß√£o meus amigos. Claro, depois de um leve check pra saber se era real o que eu estava lendo quando voc√™ me chamou de meu bem, segui com meu sorriso novamente involunt√°rio no meu rosto...</p>
                    <p>√â muito bom receber seu carinho demonstrado n√£o s√≥ atrav√©s de palavras, mas como gestos tamb√©m, e eu percebo cada detalhe t√°?! As mensagens no meio do dia, perguntas pra n√£o deixar a conversa morrer, as curtidas intencionais no insta kkkkk (sim eu vejo tudo). At√© aqui eu posso dizer que est√° sendo um prazer conhec√™-la um pouco mais cada dia que passa.</p>
                    <p>Bom, pra fechar por hoje, o que eu quero que continue perpetuando entre a gente se resume em uma palavra, e √© a senha do texto a seguir...</p>
                </div>

                <!-- Input 3: Palavra final (confian√ßa/disposta) -->
                <div class="inline-lock" id="inlineLock3">
                    <div class="inline-lock-label">Digite a palavra que resume o que eu quero que continue entre a gente:</div>
                    <div class="inline-input-group">
                        <input 
                            type="text" 
                            id="password3" 
                            class="inline-input" 
                            placeholder="A palavra final..."
                            aria-label="Palavra final"
                        >
                        <button class="inline-btn" onclick="checkInlinePassword(3)" aria-label="Continuar">Continuar</button>
                    </div>
                    <div class="inline-error" id="error3"></div>
                    <div class="hint-display active" id="hintDisplay3">
                        <p><strong>Dica 1:</strong> √â o que a pessoa certa traz consigo. N√£o vem pronta, vem com isso.</p>
                    </div>
                    <button class="hint-button" id="hintButton3" onclick="showHint(3)" aria-label="Preciso de outra dica">üí° Preciso de outra dica (1/5)</button>
                </div>

                <!-- Parte 4: Texto final sobre disposi√ß√£o -->
                <div class="text-part" id="part4">
                    <p>Disposi√ß√£o...</p>
                    <p>Vi um texto essa semana com a seguinte frase: <em>"A pessoa certa n√£o vem pronta, ela vem disposta."</em> E a verdade √© que, mesmo que algu√©m seja "pronto" ou quase perfeito, sem disposi√ß√£o nenhuma rela√ß√£o dura muito. √â isso que eu quero pra gente. Mesmo que todas as nossas expectativas sejam supridas nos pr√≥ximos dias, ainda assim vamos precisar de muita disposi√ß√£o pra manter isso que j√° √© t√£o bom e agrad√°vel entre n√≥s.</p>
                    <p>Mas, sabe‚Ä¶ ainda n√£o sei explicar direito. Eu sinto uma seguran√ßa quando olho pra voc√™. Algo que me traz paz e me faz acreditar que nunca vai faltar disposi√ß√£o entre a gente pra resolver o que for preciso ‚Äî se a gente decidir que 9 dias n√£o foram apenas boas f√©rias, mas o in√≠cio de algo incr√≠vel.</p>
                    <p style="margin-top: 32px;">Ao escutar √© como se eu tivesse dizendo pra voc√™:</p>
                    <div class="spotify-section">
                        <a 
                            href="https://open.spotify.com/track/0DJYwZ6orI4c3p5ch4jTcn?si=XQCNp_iNR9aCBFdgcOrubg" 
                            target="_blank" 
                            class="spotify-link"
                            aria-label="Abrir m√∫sica no Spotify"
                        >
                            Ouvir agora
                        </a>
                        <div class="spotify-hint">Escuta com calma.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURA√á√ïES
        // ============================================
        
        // Senhas dos bloqueios inline
        const PASSWORDS = {
            1: ["1 dezembro", "1 dez", "01 dezembro", "01 dez", "um dezembro", "um dez", "1¬∫ dezembro", "1¬∫ dez"],  // Data da primeira mensagem
            2: ["meubem", "meu bem"],  // Palavra carinhosa
            3: ["disposi√ß√£o", "disposicao", "disposta"]  // Palavra final
        };

        // Mapeamento de qual parte do texto desbloquear ap√≥s cada senha
        const UNLOCK_MAP = {
            1: 2,  // Ap√≥s senha 1, desbloqueia parte 2
            2: 3,  // Ap√≥s senha 2, desbloqueia parte 3
            3: 4   // Ap√≥s senha 3, desbloqueia parte 4
        };

        // Dicas para o input 3
        const HINTS_3 = [
            {
                type: 'image',
                content: '<p><strong>Dica 1:</strong> √â o que a pessoa certa traz consigo. N√£o vem pronta, vem com isso.</p>'
            },
            {
                type: 'action',
                content: '<p><strong>Dica 2:</strong> Come√ßa com <strong>"dis"</strong>...</p>'
            },
            {
                type: 'image',
                content: '<p><strong>Dica 3:</strong> Termina com <strong>"√ß√£o"</strong>...</p>'
            },
            {
                type: 'action',
                content: '<p><strong>Dica 4:</strong> Rima com "composi√ß√£o", "proposi√ß√£o"...</p>'
            },
            {
                type: 'message',
                content: '<p><strong>Essa eu dificultei!</strong> Pode me enviar uma mensagem que eu te dou a senha dessa parte üòä</p>'
            }
        ];

        // ============================================
        // FUN√á√ïES
        // ============================================

        // Normalizar senha (remover acentos, converter para min√∫sculas, remover espa√ßos extras)
        function normalizePassword(password) {
            return password
                .toLowerCase()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '')
                .replace(/\s+/g, ' ')
                .trim();
        }

        // Verificar se a senha est√° correta (suporta m√∫ltiplas varia√ß√µes)
        function isPasswordCorrect(userInput, correctPassword) {
            const normalizedInput = normalizePassword(userInput);
            
            if (Array.isArray(correctPassword)) {
                // Se for array, verifica se o input corresponde a alguma das op√ß√µes
                return correctPassword.some(pwd => normalizePassword(pwd) === normalizedInput);
            } else {
                // Se for string, compara normalmente
                return normalizePassword(correctPassword) === normalizedInput;
            }
        }

        // Contador de dicas para cada input (come√ßa em 1 porque a primeira dica j√° est√° exposta)
        let hintCounters = {
            3: 1
        };

        // Mostrar dica progressiva
        function showHint(lockNumber) {
            if (lockNumber === 3) {
                const hintDisplay = document.getElementById('hintDisplay3');
                const hintButton = document.getElementById('hintButton3');
                const currentHint = hintCounters[3];

                if (currentHint < HINTS_3.length) {
                    hintDisplay.innerHTML = HINTS_3[currentHint].content;
                    hintDisplay.classList.add('active');
                    hintCounters[3]++;

                    // Salvar contador no localStorage
                    localStorage.setItem('cofre2_hintCount3', hintCounters[3].toString());

                    // Se chegou na √∫ltima dica, esconder o bot√£o
                    if (hintCounters[3] >= HINTS_3.length) {
                        hintButton.style.display = 'none';
                    } else {
                        hintButton.textContent = `üí° Preciso de outra dica (${hintCounters[3]}/${HINTS_3.length})`;
                    }
                }
            }
        }

        // Verificar senha inline e desbloquear pr√≥xima parte do texto
        function checkInlinePassword(lockNumber) {
            const input = document.getElementById(`password${lockNumber}`);
            const errorMsg = document.getElementById(`error${lockNumber}`);
            const inlineLock = document.getElementById(`inlineLock${lockNumber}`);
            const btn = input.nextElementSibling;

            const userInput = input.value;
            const correctPassword = PASSWORDS[lockNumber];

            errorMsg.textContent = '';

            if (isPasswordCorrect(userInput, correctPassword)) {
                // Senha correta
                inlineLock.classList.add('unlocked');
                input.disabled = true;
                btn.disabled = true;
                btn.textContent = '‚úì';
                
                // Esconder bot√£o de dica se existir
                const hintButton = document.getElementById(`hintButton${lockNumber}`);
                if (hintButton) {
                    hintButton.style.display = 'none';
                }
                
                // Desbloquear pr√≥xima parte do texto
                const nextPart = UNLOCK_MAP[lockNumber];
                if (nextPart) {
                    const nextPartElement = document.getElementById(`part${nextPart}`);
                    if (nextPartElement) {
                        nextPartElement.classList.add('active');
                    }
                }
                
                // Salvar no localStorage
                localStorage.setItem(`cofre2_lock${lockNumber}_unlocked`, 'true');
                localStorage.setItem(`cofre2_part${nextPart}_unlocked`, 'true');
            } else {
                // Senha incorreta
                if (lockNumber === 3) {
                    // Para o input 3, mostrar pr√≥xima dica ao inv√©s de mensagem de erro
                    showHint(3);
                } else {
                    // Para outros inputs, mostrar mensagem de erro normal
                    const messages = [
                        'Hmm, n√£o √© essa... ü§î',
                        'Quase l√°! üí≠',
                        'Mais uma tentativa? üòä'
                    ];
                    const randomMsg = messages[Math.floor(Math.random() * messages.length)];
                    errorMsg.textContent = randomMsg;
                }
            }
        }

        // Permitir Enter para submeter senhas
        document.addEventListener('DOMContentLoaded', function() {
            // Adicionar listeners de Enter para todos os inputs
            for (let i = 1; i <= 3; i++) {
                const input = document.getElementById(`password${i}`);
                if (input) {
                    input.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            checkInlinePassword(i);
                        }
                    });
                }
            }

            // Restaurar estado dos bloqueios desbloqueados
            for (let i = 1; i <= 3; i++) {
                const isUnlocked = localStorage.getItem(`cofre2_lock${i}_unlocked`) === 'true';
                if (isUnlocked) {
                    const inlineLock = document.getElementById(`inlineLock${i}`);
                    const input = document.getElementById(`password${i}`);
                    const btn = input ? input.nextElementSibling : null;
                    
                    if (inlineLock) inlineLock.classList.add('unlocked');
                    if (input) {
                        input.disabled = true;
                    }
                    if (btn) {
                        btn.disabled = true;
                        btn.textContent = '‚úì';
                    }
                    
                    // Esconder bot√£o de dica se existir
                    const hintButton = document.getElementById(`hintButton${i}`);
                    if (hintButton) {
                        hintButton.style.display = 'none';
                    }
                    
                    // Restaurar partes do texto desbloqueadas
                    const nextPart = UNLOCK_MAP[i];
                    if (nextPart) {
                        const isPartUnlocked = localStorage.getItem(`cofre2_part${nextPart}_unlocked`) === 'true';
                        if (isPartUnlocked) {
                            const nextPartElement = document.getElementById(`part${nextPart}`);
                            if (nextPartElement) {
                                nextPartElement.classList.add('active');
                            }
                        }
                    }
                }
            }

            // Restaurar contador de dicas do input 3 (come√ßa em 1 porque primeira dica j√° est√° exposta)
            const hintCount3 = localStorage.getItem('cofre2_hintCount3');
            if (hintCount3) {
                hintCounters[3] = Math.max(1, parseInt(hintCount3)); // Garantir que nunca seja menor que 1
                if (hintCounters[3] > 1 && hintCounters[3] <= HINTS_3.length) {
                    const hintDisplay = document.getElementById('hintDisplay3');
                    const hintButton = document.getElementById('hintButton3');
                    if (hintDisplay && hintButton) {
                        hintDisplay.innerHTML = HINTS_3[hintCounters[3] - 1].content;
                        hintDisplay.classList.add('active');
                        if (hintCounters[3] === HINTS_3.length) {
                            hintButton.style.display = 'none';
                        } else {
                            hintButton.textContent = `üí° Preciso de outra dica (${hintCounters[3]}/${HINTS_3.length})`;
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
